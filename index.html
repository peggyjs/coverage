<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@peggyjs/coverage - v2.0.4</title><meta name="description" content="Documentation for @peggyjs/coverage"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">@peggyjs/coverage - v2.0.4</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>@peggyjs/coverage - v2.0.4</h1></div><div class="tsd-panel tsd-typography"><h1 id="peggyjscoverage" class="tsd-anchor-link">@peggyjs/coverage<a href="#peggyjscoverage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>Up the code coverage on your <a href="https://peggyjs.org/">Peggy</a> grammars, ensuring
that the generated boilerplate code is covered in your unit tests.  This makes
it easier to find places in your grammar that actually need to be tested.</p>
<p>This library uses a few unsavory hacks to get to pieces of the Peggy boilerplate
that are always included, even thought they aren't used in your particular
grammar or in your configuration.  For example, a few lines of code are only
ever executed if you are in trace mode.</p>
<h2 id="installation" class="tsd-anchor-link">Installation<a href="#installation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="sh"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-3">--dev</span><span class="hl-1"> </span><span class="hl-2">@peggyjs/coverage</span>
</code><button type="button">Copy</button></pre>

<h2 id="api" class="tsd-anchor-link">API<a href="#api" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Full <a href="https://peggyjs.github.io/coverage/">documentation</a> is available.</p>
<p>Pass in the <code>file:</code> URL for the JavaScript output from Peggy:</p>
<pre><code class="js"><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-0">testPeggy</span><span class="hl-1">(</span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">URL</span><span class="hl-1">(</span><span class="hl-2">&quot;../lib/parser.js&quot;</span><span class="hl-1">, </span><span class="hl-4">import</span><span class="hl-1">.</span><span class="hl-5">meta</span><span class="hl-1">.</span><span class="hl-5">url</span><span class="hl-1">), [</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-5">validInput:</span><span class="hl-1"> </span><span class="hl-2">&quot;foo&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">validResult:</span><span class="hl-1"> [</span><span class="hl-2">&quot;f&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;o&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;o&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-5">invalidInput:</span><span class="hl-1"> </span><span class="hl-2">&quot;bar&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">]);</span>
</code><button type="button">Copy</button></pre>

<p>The second parameter is an array of tests.  You should include at least one
valid input, and at least one invalid input, but they need not be in the same
test.</p>
<p>Each test definition has the following type:</p>
<pre><code class="ts"><span class="hl-4">export</span><span class="hl-1"> </span><span class="hl-3">type</span><span class="hl-1"> </span><span class="hl-6">PeggyTestOptions</span><span class="hl-1">&lt;</span><span class="hl-6">T</span><span class="hl-1">&gt; = {</span><br/><span class="hl-1">    </span><span class="hl-7">/**</span><br/><span class="hl-7">     * Which valid start rule to use?  Default: grammar default start rule.</span><br/><span class="hl-7">     */</span><br/><span class="hl-1">    </span><span class="hl-5">startRule</span><span class="hl-1">?: </span><span class="hl-6">string</span><span class="hl-1"> | </span><span class="hl-6">undefined</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-7">/**</span><br/><span class="hl-7">     * If specified, check this against the startRule.</span><br/><span class="hl-7">     */</span><br/><span class="hl-1">    </span><span class="hl-5">validInput</span><span class="hl-1">?: </span><span class="hl-6">string</span><span class="hl-1"> | </span><span class="hl-6">undefined</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-7">/**</span><br/><span class="hl-7">     * What result should startRule return for validInput? Default:</span><br/><span class="hl-7">     * validInput.</span><br/><span class="hl-7">     */</span><br/><span class="hl-1">    </span><span class="hl-5">validResult</span><span class="hl-1">?: </span><span class="hl-6">T</span><span class="hl-1"> | ((</span><span class="hl-5">res</span><span class="hl-1">: </span><span class="hl-6">T</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-6">any</span><span class="hl-1">) | </span><span class="hl-6">undefined</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-7">/**</span><br/><span class="hl-7">     * If specified, ensure that the grammar fails on this input.</span><br/><span class="hl-7">     */</span><br/><span class="hl-1">    </span><span class="hl-5">invalidInput</span><span class="hl-1">?: </span><span class="hl-6">string</span><span class="hl-1"> | </span><span class="hl-6">undefined</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-7">/**</span><br/><span class="hl-7">     * Expected peg$maxFailPos.</span><br/><span class="hl-7">     */</span><br/><span class="hl-1">    </span><span class="hl-5">peg$maxFailPos</span><span class="hl-1">?: </span><span class="hl-6">number</span><span class="hl-1"> | </span><span class="hl-6">undefined</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-7">/**</span><br/><span class="hl-7">     * What to append to validInput to make it invalid, so that library mode</span><br/><span class="hl-7">     * will return a prefix match.</span><br/><span class="hl-7">     */</span><br/><span class="hl-1">    </span><span class="hl-5">invalid</span><span class="hl-1">?: </span><span class="hl-6">string</span><span class="hl-1"> | </span><span class="hl-6">undefined</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-7">/**</span><br/><span class="hl-7">     * If any test has this set to true, only run the tests with this set to</span><br/><span class="hl-7">     * true.</span><br/><span class="hl-7">     */</span><br/><span class="hl-1">    </span><span class="hl-5">only</span><span class="hl-1">?: </span><span class="hl-6">boolean</span><span class="hl-1"> | </span><span class="hl-6">undefined</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-7">/**</span><br/><span class="hl-7">     * If true, skip this test.</span><br/><span class="hl-7">     */</span><br/><span class="hl-1">    </span><span class="hl-5">skip</span><span class="hl-1">?: </span><span class="hl-6">boolean</span><span class="hl-1"> | </span><span class="hl-6">undefined</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-7">/**</span><br/><span class="hl-7">     * Extra options to pass to parse(), overriding whatever else this library</span><br/><span class="hl-7">     * would have otherwise used.</span><br/><span class="hl-7">     */</span><br/><span class="hl-1">    </span><span class="hl-5">options</span><span class="hl-1">?: (</span><span class="hl-3">import</span><span class="hl-1">(</span><span class="hl-2">&quot;peggy&quot;</span><span class="hl-1">).</span><span class="hl-6">ParserOptions</span><span class="hl-1"> &amp; </span><span class="hl-6">ExtraParserOptions</span><span class="hl-1">) | </span><span class="hl-6">undefined</span><span class="hl-1">;</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-4">export</span><span class="hl-1"> </span><span class="hl-3">type</span><span class="hl-1"> </span><span class="hl-6">ExtraParserOptions</span><span class="hl-1"> = {</span><br/><span class="hl-1">    </span><span class="hl-7">/**</span><br/><span class="hl-7">     * In the augmented code only, use this function as the start rule rather</span><br/><span class="hl-7">     * than the default.  This gives access to functions that are NOT valid</span><br/><span class="hl-7">     * start rules for internal testing.</span><br/><span class="hl-7">     */</span><br/><span class="hl-1">    </span><span class="hl-5">peg$startRuleFunction</span><span class="hl-1">?: </span><span class="hl-6">string</span><span class="hl-1"> | </span><span class="hl-6">undefined</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-7">/**</span><br/><span class="hl-7">     * Number of times for each of the given rules to succeed before they</span><br/><span class="hl-7">     * fail.  Only applies in the augmented code.</span><br/><span class="hl-7">     */</span><br/><span class="hl-1">    </span><span class="hl-5">peg$failAfter</span><span class="hl-1">?: {</span><br/><span class="hl-1">        [</span><span class="hl-5">ruleName</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1">]: </span><span class="hl-6">number</span><span class="hl-1">;</span><br/><span class="hl-1">    } | </span><span class="hl-6">undefined</span><span class="hl-1">;</span><br/><span class="hl-1">};</span>
</code><button type="button">Copy</button></pre>

<h2 id="runtime-support" class="tsd-anchor-link">Runtime support<a href="#runtime-support" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Only tested on NodeJS 20, 22, and 23.  Only tested in es6 mode.</p>
<hr>
<p><a href="https://github.com/peggyjs/coverage/actions/workflows/node.js.yml"><img src="https://github.com/peggyjs/coverage/actions/workflows/node.js.yml/badge.svg" alt="Tests"></a>
<a href="https://codecov.io/gh/peggyjs/coverage"><img src="https://codecov.io/gh/peggyjs/coverage/graph/badge.svg?token=KIIAM551FQ" alt="codecov"></a></p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#peggyjscoverage"><span>@peggyjs/coverage</span></a><ul><li><a href="#installation"><span>Installation</span></a></li><li><a href="#api"><span>API</span></a></li><li><a href="#runtime-support"><span>Runtime support</span></a></li></ul></div></details></div><div class="site-menu"><nav id="tsd-sidebar-links" class="tsd-navigation"><a href="https://github.com/peggyjs/coverage">GitHub</a><a href="http://peggyjs.github.io/coverage/">Documentation</a></nav><nav class="tsd-navigation"><a href="modules.html">@peggyjs/coverage - v2.0.4</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
